{%  extends 'base.html.twig' %}

{% block stylesheets %}
{{ parent() }}
    <script src="https://js.stripe.com/v3/"></script>
    <link href="{{ asset('css/funding.css') }}" rel="stylesheet">

{% endblock %}

{% block body %}

    <div class="container" style="margin-top: 7%; margin-bottom: 5%; background-color: white">

        <div class="row">
            <div class="col-md-4" style="position:relative; overflow:hidden">

                {% if postInfo.imagePath == '/post/image/' %}
                    <div>
                        <img class="img-fluid rounded-custom img-post" src="{{ postInfo.DefaultImagePath | imagine_filter('card_thumbnail_showpost') }}" alt="">
                    </div>

                {% else %}
                    <img class="img-fluid rounded-custom img-post" src="{{ postInfo.imagePath| imagine_filter('card_thumbnail_showpost') }}" alt="">
                {% endif %}
            </div>

            <div class="col-md-8">
                <p style="text-align: center">{% trans %}Thông tin thẻ tín dụng{% endtrans %}</p>
                <form id="payment-form" method="post">

                    <input type="text" placeholder="Họ và tên chủ thẻ" required="">

                    <label><input type="checkbox" id="anonymous" value="1" name="anonymous"/> {% trans %}Tôi mong muốn được ẩn danh cho khoản quyên góp này{% endtrans %}</label>

                    <div id="card-element" style="width: 80%; height: 30px; color: black;">
                        <!-- Elements will create input elements here -->
                    </div>

                    <!-- We'll put the error messages in this element -->
                    <div id="card-errors" role="alert"></div>

                    <input id="token" type="hidden" name="token" value="{{ csrf_token('funding_step') }}"/>

                    <button id="submit" class="btn">{% trans %}Quyên góp {% endtrans %} {{ amount }} €</button>

                </form>
            </div>
        </div>
    </div>


{% endblock %}

{% block javascripts %}
 {{ parent() }}
    <script>
        var clientSecret = '{{ clientSecret }}';
        var uniquekey = '{{ postInfo.uniquekey }}';
        var userId = {{ userInfo.Id }};
        var userEmail = '{{ userInfo.Email }}';
        var amount = {{ amount }};
        var Donation_After_fees = {{ donationIncludeFees }};
        var totalFees = {{ totalFees }};
        var token = document.getElementById("token");
        var givingAmount = {{ givingAmount }};
    //    console.log(givingAmount);

        var IsNotAnonymous = false;
        $('#anonymous').click(function() {
            IsNotAnonymous = $('#anonymous').prop('checked');
        });
       // console.log(IsNotAnonymous);
    </script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <script src="{{ asset('js/stripe.js') }}">

    </script>

{% endblock %}